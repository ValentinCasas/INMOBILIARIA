@{
    var lista = (IList<Contrato>)ViewBag.lista;
    var pagos = (IList<Pago>)ViewBag.pagos;
    ViewData["Title"] = "Lista de Contratos";
}

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-12">
        <div class="card-header bg-primary text-white">
          <h1 class="display-4 text-center">CONTRATOS</h1>
          <input type="text" id="search-input" class="form-control"
                        placeholder="Buscar por monto">
        </div>

      <div class="card bg-light" id="card-form">
        <div class="card-body">

          @if (lista.Count != 0){
           <div class="row row-cols-1 row-cols-md-3 g-4">
            @foreach (var item in lista)
            {
                <div class="col">
              <div class="card  border-secondary">
                <div class="card-body">
                  <h5 class="card-title "> $ @item.MontoAlquilerMensual </h5>
                   <h6 class="card-subtitle mb-2 text-muted">@item.FechaInicio </h6>   
                  <hr>
                   <p class="card-text"> Fecha fin:  @item.FechaFinalizacion </p>
                    
                    <p class="card-text"> Activo:  @(item.Activo ? "si" : "no") </p>
                    <div class="btn-group d-flex justify-content-center" role="group" aria-label="Acciones">
                                            <a href="@Url.Action("Update", new { id = item.Id })"
                                                class="btn btn-outline-secondary"><ion-icon
                                                    name="create-outline"></ion-icon>Editar</a>
                                            <a href="@Url.Action("Delete", new { id = item.Id })"
                                                class="btn btn-outline-danger" id="btn-delete-@item.Id"><ion-icon
                                                    name="trash-outline"></ion-icon>Borrar</a>
                                        </div>
                  
                </div>


                <div class="card-footer">
                  <div class="">
                    <details>
                      <summary>Detalles</summary>
                    <details>
                      <summary>Inquilino:</summary>
                      <div>
                        <p>Nombre: @item.Inquilino.Nombre </p>
                        <p>Apellido @item.Inquilino.Apellido</p>
                        <p>Dni: @item.Inquilino.Dni</p>
                        <p>Telefono: @item.Inquilino.Telefono</p>
                        <p>Email: @item.Inquilino.Email</p>
                      </div>
                    </details>

                    <details>
                      <summary>Inmueble:</summary>
                      <div>
                        <p>Direccion: @item.Inmueble.Direccion </p>
                        <p>Uso @item.Inmueble.Uso</p>
                        <p>Tipo: @item.Inmueble.Tipo</p>
                        <p>Ambientes: @item.Inmueble.CantidadAmbientes</p>
                        <p>Coordenadas: @item.Inmueble.Coordenadas</p>
                        <p>Precio: @item.Inmueble.PrecioInmueble</p>
                        <p>Estado: @item.Inmueble.Estado</p>
                      </div>
                    </details>

                    <details>
                      <summary>Pagos:</summary>
                      @foreach (var pago in pagos.Where(p => p.IdContrato == item.Id))
                      {
                        <div>
                          <p>@pago.ToString()</p>
                        </div>
                      }
                    </details>
                    </details>
                            </div>
                        </div>
                        </div>
                    </div>
                        }
           
                     </div>     
            
                    }
                    else
                    {
                        <h2 class="text-center">No hay contratos en el sitio</h2>
                    }

</div>
</div>
</div>
</div>


                <div id="add">
                    <a class="btn btn-success" href="@Url.Action("Create")" role="button"><ion-icon
                            name="add-outline"></ion-icon>
                    </a>
                </div>




<style>
    summary {
        font-size: 1.2rem;
        font-weight: bold;
        padding: 5px;
        background-color: #f5f5f5;
        cursor: pointer;
        outline: none;
        transition: background-color 0.2s ease;
    }

    summary:hover {
        background-color: #ddd;
    }

    summary::-webkit-details-marker {
        display: none;
    }

    /* Estilo del contenido */
    details>div {
        border: 1px solid #ddd;
        border-top: none;
        padding: 1rem;
        background-color: #f9f9f9;
        transition: background-color 0.2s ease;
    }

    details[open]>div {
        border-top: 1px solid #ddd;
    }

    details:hover>div {
        background-color: #f5f5f5;
    }

    .collapse {
        display: none;
    }

    .card {
        border: 1px solid #ddd;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        margin-top: 1rem;
    }

    .card-body {
        padding: 1rem;
    }

    .card-body p {
        display: inline-block;
        margin-right: 1rem;
    }

    .card-body h3 {
        margin-top: 0;
    }

    .collapse.show {
        display: block;
    }

    #card-form {
        background-color: #ada8a85c;
        height: 500px;
        overflow-y: scroll;
    }

  #add {
        position: fixed;
        bottom: 0;
        right: 0;
        margin: 20px;
    }

    .accordion-toggle {
        transition: all .5s ease;
    }

    .accordion-toggle:hover {
        background-color: #abe7a3;
        cursor: pointer;
    }

    .table-responsive {
        background-color: #c2c4cf;
        border-radius: 5px;
        border: .5px solid rgb(105, 101, 101);
    }
</style>


